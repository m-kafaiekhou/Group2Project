{% extends 'dashboard/_base.html' %}
{% load crispy_forms_tags %}
{% load humanize %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'detail.css' %}">
{% endblock %}

{% block content %}
    <!-- Main content -->
    <div class="row container-fluid justify-content-center">
        <div class="col-lg-9">
            <!-- Details -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="mb-3 d-flex justify-content-between">
                        <div>
                            <span class="me-3">Order Date: {{ order.order_date }}</span>
                            <span class="me-3">Order Number: {{ order.id }}</span>
                            <span class="me-3">Phone Number: {{ order.phone_number }}</span>

                        </div>
                        <div class="d-flex">
                            <span class="badge rounded-pill bg-info"
                                  style="font-size: large">Table #{{ order.table_number }}</span>
                        </div>
                    </div>
                    <table class="table table-borderless">
                        <tbody>
                        {% for item in order.get_order_items %}
                            <tr>
                                <td>
                                    <div class="d-flex mb-2">
                                        <div class="flex-shrink-0">
                                            <a href="{{ item.cafeitem.image.url }}"><img
                                                    src="{{ item.cafeitem.image.url }}" alt="" width="35"
                                                    class="img-fluid"></a>
                                        </div>
                                        <div class="flex-lg-grow-1 ms-3">
                                            <h6 class="small mb-0"><a href="#" class="text-reset">Wireless
                                                Headphones
                                                with
                                                Noise Cancellation Tru Bass Bluetooth HiFi</a></h6>
                                            <span class="small">Color: Black</span>
                                        </div>
                                    </div>
                                </td>
                                <td>1</td>
                                <td class="text-end">79 T</td>
                            </tr>
                        {% endfor %}
                        <tr>
                            <td>
                                <input type="text" name="example" list="exampleList" class="select form-select mb-3">
                                <datalist id="exampleList">
                                    <option value="A">
                                    <option value="B">
                                </datalist>
                            </td>
{#                            <td>#}
{#                                <label for="exampleList" class="text-primary font-weight-bolder" style="font-size: large">Add#}
{#                                    Item To Order</label>#}
{#                            </td>#}
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="2">Status</td>
                            {% if order.status == 'D' %}
                                <td class="text-end text-primary">{{ order.get_status_display }}</td>
                            {% elif order.status == 'A' %}
                                <td class="text-end text-success">{{ order.get_status_display }}</td>
                            {% elif order.status == 'C' %}
                                <td class="text-end text-danger">{{ order.get_status_display }}</td>
                            {% endif %}

                        </tr>
                        <tr>
                            <td colspan="2">Shipping</td>
                            <td class="text-end">-</td>
                        </tr>
                        <tr class="fw-bold">
                            <td colspan="2">TOTAL</td>
                            <td class="text-end">{{ order.get_total_price }} T</td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <!-- Payment -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row">
                        <form method="POST">
                            {% csrf_token %}
                            <label for="exampleList" class="text-primary">Add Item To Order</label>
                            <input type="text" name="example" list="exampleList" class="select form-select mb-3">
                            <datalist id="exampleList">
                                <option value="A">
                                <option value="B">
                            </datalist>
                            {{ form|crispy }}
                            <button type="submit" class="btn btn-primary">Update Order</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>


    {#<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.rtl.min.css">#}
    {#<div class="container mt-4">#}
    {#    <div class="row">#}
    {#        <div class="col-12">#}
    {##}
    {#            <div class="card shadow my-3 p-5">#}
    {#                <h3>شماره سفارش: {{ order.id }}</h3>#}
    {#                <h5>شماره موبایل: {{ order.phone_number }}</h5>#}
    {#                <p class="mt-2">شماره میز: {{ order.table_number }}</p>#}
    {#                <p class="mt-2">تاریخ سفارش: {{ order.order_date }}</p>#}
    {#            </div>#}
    {##}
    {##}
    {#            <div class="container padding-bottom-3x mb-1 pt-5">#}
    {#                <div class="table-responsive shopping-cart">#}
    {#                    <table class="table">#}
    {#                        <thead>#}
    {#                        <tr>#}
    {#                            <th class="yekan"></th>#}
    {#                            <th class="yekan">محصول</th>#}
    {#                            <th class="text-center yekan">تعداد</th>#}
    {#                            <th class="text-center yekan">فی</th>#}
    {#                            <th class="text-center yekan">مجموع</th>#}
    {#                            <th class="text-center yekan"></th>#}
    {#                        </tr>#}
    {#                        </thead>#}
    {#                        <tbody>#}
    {#                        {% for item in order.get_order_items %}#}
    {#                            <tr>#}
    {#                                <td>#}
    {#                                    <div class="product-item">#}
    {#                                        <a class="product-thumb" href="{{ item.cafeitem.image.url }}"><img#}
    {#                                                src="{{ item.cafeitem.image.url }}" alt="Product"#}
    {#                                                style="width: 5rem; height: 5rem;"></a>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                                <td>#}
    {#                                    <div class="product-info">#}
    {#                                        <h4 class="product-title"><a href="#">{{ item.cafeitem.name }}</a></h4>#}
    {#<span><em>Size:</em> 10.5</span><span><em>Color:</em> Dark Blue</span>#}
    {#                                    </div>#}
    {#                                </td>#}
    {#                                <td class="text-center">#}
    {#                                    <h4>{{ item.quantity }}</h4>#}
    {#<input value="{{ item.id }}" name="{{ item.id }}" style="display: none">#}
    {#                                </td>#}
    {#                                <td class="text-center text-lg text-medium">{{ item.cafeitem.price|intcomma }}</td>#}
    {#                                <td class="text-center text-lg text-medium">#}
    {#                                    {% widthratio item.cafeitem.price 1 item.quantity as tot %}{{ tot|intcomma }}</td>#}
    {##}
    {#                            </tr>#}
    {#                        {% endfor %}#}
    {##}
    {#                        </tbody>#}
    {#                    </table>#}
    {#                </div>#}
    {#            </div>#}
    {##}
    {##}
    {#            <div class="card shadow my-3 p-5">#}
    {#                <h3>Add new comment:</h3>#}
    {#                <form method="POST">#}
    {#                    {% csrf_token %}#}
    {#                    {{ form|crispy }}#}
    {#                    <button type="submit" class="btn btn-primary">Submit</button>#}
    {#                </form>#}
    {#            </div>#}
    {#        </div>#}
    {##}
    {#    </div>#}
    {#</div>#}
{% endblock %}